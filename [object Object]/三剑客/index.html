<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <!-- cungudafa百度收录验证编号 -->
  <!-- <meta name="baidu-site-verification" content="LukfTcyXmC" /> -->
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  
  <title itemprop="name">三剑客 | 酒酒</title>
  
    <link rel="shortcut icon" href="/images/favicon.ico">
  
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+SerifMerriweather|Merriweather+Sans|Source+Code+Pro|Ubuntu:400,700|Noto+Serif+SC" media="all">
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/cungudafa/cdn/css/style.css" type="text/css" media="all" id="saukra_css-css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/cungudafa/cdn/css/jquery.fancybox.min.css" media="all">  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/cungudafa/cdn/css/lib.min.css" media="all">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/cungudafa/cdn/css/font.css" media="all">
  <link rel="stylesheet" href="/css/insight.css" media="all">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/cungudafa/cdn/css/tags.css" media="all">
  
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/cungudafa/cdn/css/logo.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/cungudafa/cdn/fonts/LOGO/logo.css">
  
  <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>

  <!-- 分析 -->
  <!-- Global site tag (gtag.js) - Google Analytics -->


  <!-- Baidu Analytics -->

  
  <!--   <link rel="stylesheet" id="saukra_css-css" href="https://2heng.xin/wp-content/cache/autoptimize/css/autoptimize_ad42a61f4c7d4bdd9f91afcff6b5dda5.css
  " type="text/css" media="all"> -->
  <script>
    /*Initial Variables*/
    var mashiro_option = new Object();
    var mashiro_global = new Object();
    mashiro_option.NProgressON = true;
    /* 
    * 邮箱信息之类的东西可以填在这里，这些js变量基本都作用于sakura-app.js
    * 这样的设置仅是为了方便在基于PHP开发的主题中设置js变量，既然移植到了Node上，我想或许可以精简这一逻辑吧
    */
    mashiro_option.email_domain = "";
    mashiro_option.email_name = "";
    mashiro_option.cookie_version_control = "";
    mashiro_option.qzone_autocomplete = false;
    mashiro_option.site_name = "酒酒";
    mashiro_option.author_name = "";
    mashiro_option.site_url = "";
    mashiro_option.v_appId = "";//
    mashiro_option.v_appKey = "";//
    mashiro_option.mathjax = "1";
    mashiro_option.copyright_enable = "true" ;
    mashiro_option.copyright_minCharNumber = parseInt("120") ;
    mashiro_option.copyright_description = "本文章著作权归作者所有，任何形式的转载都请注明出处。" ;
    mashiro_option.qq_api_url = "https://api.mashiro.top/qqinfo/"; 
    mashiro_option.qq_avatar_api_url = "https://api.mashiro.top/qqinfo/";

    // mashiro_option.jsdelivr_css_src = "https://cdn.jsdelivr.net/gh/moezx/cdn@3.4.5/css/lib.min.css";
    // mashiro_option.float_player_on = true;

    /*End of Initial Variables*/
  </script>
  <script type="text/javascript">
    var bg = "https://jiujiu.tj.cn/jiujiu/1.webp,https://jiujiu.tj.cn/jiujiu/2.webp,https://jiujiu.tj.cn/jiujiu/3.webp,https://jiujiu.tj.cn/jiujiu/4.webp,https://jiujiu.tj.cn/jiujiu/5.webp,https://jiujiu.tj.cn/jiujiu/6.webp,https://jiujiu.tj.cn/jiujiu/7.webp,https://jiujiu.tj.cn/jiujiu/8.webp,https://jiujiu.tj.cn/jiujiu/9.webp,https://jiujiu.tj.cn/jiujiu/10.webp,https://jiujiu.tj.cn/jiujiu/12.webp,https://jiujiu.tj.cn/jiujiu/13.webp,https://jiujiu.tj.cn/jiujiu/14.webp,https://jiujiu.tj.cn/jiujiu/15.webp,https://jiujiu.tj.cn/jiujiu/16.webp,https://jiujiu.tj.cn/jiujiu/thumb_1.webp,https://jiujiu.tj.cn/jiujiu/thumb_2.webp,https://jiujiu.tj.cn/jiujiu/thumb_3.webp,https://jiujiu.tj.cn/jiujiu/thumb_4.webp,https://jiujiu.tj.cn/jiujiu/thumb_5.webp,https://jiujiu.tj.cn/jiujiu/thumb_6.webp,https://jiujiu.tj.cn/jiujiu/thumb_7.webp,https://jiujiu.tj.cn/jiujiu/thumb_8.webp,https://jiujiu.tj.cn/jiujiu/thumb_9.webp,https://jiujiu.tj.cn/jiujiu/thumb_10.webp,https://jiujiu.tj.cn/jiujiu/thumb_11.webp,https://jiujiu.tj.cn/jiujiu/thumb_12.webp,https://jiujiu.tj.cn/jiujiu/thumb_13.webp,https://jiujiu.tj.cn/jiujiu/thumb_14.webp,https://jiujiu.tj.cn/jiujiu/thumb_15.webp,https://jiujiu.tj.cn/jiujiu/thumb_16.webp,https://jiujiu.tj.cn/jiujiu/thumb_17.webp,https://jiujiu.tj.cn/jiujiu/thumb_18.webp,https://jiujiu.tj.cn/jiujiu/thumb_19.webp,https://jiujiu.tj.cn/jiujiu/thumb_20.webp,https://jiujiu.tj.cn/jiujiu/thumb_21.webp,https://jiujiu.tj.cn/jiujiu/thumb_22.webp,https://jiujiu.tj.cn/jiujiu/thumb_23.webp".split(",");
    var bgindex = Math.floor(Math.random()*bg.length);
    if (!!window.ActiveXObject || "ActiveXObject" in window) { //is IE?
      alert('朋友，IE浏览器未适配哦~');
    }
  </script>
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="酒酒" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head> 

<body class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit">
  <!-- Dynamic sliders -->
  <div class="scrollbar" id="bar">
  </div>
  <a href="#" class="cd-top faa-float animated"></a>
  <!-- Main content -->
  <section id="main-container">
    <!-- Top menu -->
    <div class="headertop filter-dot">
  <div id="banner_wave_1"></div>
  <div id="banner_wave_2"></div>
  <figure id="centerbg" class="centerbg">
    <div class="focusinfo no-select">
      <div class="header-tou">
        <a href="">
          <img src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/custom/cungudafa.jpg">
        </a>
      </div>
      <div class="header-info">
        <p>山有木兮木有枝，心悦君兮君未知</p>
        <div class="top-social_v2">
          <li id="bg-pre">
            <img class="flipx" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
          
            
              
                <li>
                  <a href="https://github.com/jiujiu-del" target="_blank" class="social-github" title="github">
                    <img src="https://cdn.jsdelivr.net/gh/cungudafa/cdnhttps://jiujiu.tj.cn/jiujiu/github.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://ac.qq.com/" target="_blank" class="social-github" title="腾讯漫画">
                    <img src="https://cdn.jsdelivr.net/gh/cungudafa/cdnhttps://jiujiu.tj.cn/jiujiu/tx.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://space.bilibili.com/49447687" target="_blank" class="social-github" title="bilibili">
                    <img src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/social/bilibili.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://y.music.163.com/m/playlist?id=718291344&amp;userid=479981682&amp;creatorId=479981682" target="_blank" class="social-github" title="网易云">
                    <img src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/social/wangyiyun.png">
                  </a>
                </li>
              
            
          
          <li id="bg-next">
            <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
        </div>
      </div>
    </div>
  </figure>
  
  <div id="video-container">
    <video style="object-fit: fill" id="bgvideo" class="video" video-name="" src="" width="auto" preload="auto">
    </video>
    <div id="video-btn" class="loadvideo videolive">
    </div>
    <div id="video-add">
    </div>
    <div class="video-stu">
    </div>
  </div>
  <div class="headertop-down faa-float animated" onclick="headertop_down()">
    <span>
      <i class="fa fa-chevron-down" aria-hidden="true">
      </i>
    </span>
  </div>
</div>
    <div id="page" class="site wrapper">
      <!-- banner -->
      <header class="site-header no-select gizle sabit" role="banner">
  <div class="site-top">
    <div class="site-branding">
        <span class="site-title">
            <span class="logolink logo">
                <a href="/">
                    <ruby>
                    <span class="sakuraso">酒酒</span>
                    <span class="no">の</span>
                    <span class="shironeko">小屋</span>
                    <rp></rp>
                    <rt class="logo">酒酒</rt>
                    <rp></rp>
                    </ruby>
                  </a>
            </span>
          </span>
    </div>
    <div class="searchbox search-form-submit">
      <i class="iconfont js-toggle-search iconsearch icon-search">
      </i>
    </div>
    <div id="show-nav" class="showNav mobile-fit">
      <div class="line line1">
      </div>
      <div class="line line2">
      </div>
      <div class="line line3">
      </div>
    </div>
    <div class="lower-cantiner">
      <div class="lower">
        <nav class="mobile-fit-control hide">
          <ul id="menu-new" class="menu">
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
                    首页
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/archives">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
                    归档
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                  </ul>
                
              </li>
            
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

      
      <!-- body -->
      <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/cungudafa/cdn/css/sharejs.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<div class="pattern-center-blank"></div>

<div id="content" class="site-content">
  <div id="primary" class="content-area">
    <main id="main" class="site-main" role="main">
      <article id="post-1"
        class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized">
        <div class="toc"></div>
        <!--<div class="toc-entry-content">  -->
        <!--套嵌目录使用（主要为了支援评论）-->
        
        <div class="entry-content">
          <p>三剑客 grep 丶 awk 丶 sed</p>
<p>正则表达式</p>
<p>1.1 什么是正则表达式</p>
<ul>
<li>匹配一些<font color = 'red'>有规律的</font>东西，比如手机号丶日志文件等</li>
<li>正则表达式 regular expression (RE)</li>
<li>正则使用：使用一些符号表达重复出现大小写，开头 / 结尾含义</li>
</ul>
<p>1.2 应用场景</p>
<table>
<thead>
<tr>
<th>正则表达式</th>
<th>Linux 三剑客使用，或者一些开发语言 (python,golang…)</th>
</tr>
</thead>
<tbody>
<tr>
<td>应用场景</td>
<td>过滤有规律的内容，尤其是日志</td>
</tr>
</tbody>
</table>
<p>1.3 正则使用事项</p>
<ul>
<li>所有的符号英文符号</li>
<li>学习正则，是通过 grep 命令学习 grep 加上单引号 如  grep ‘xxx’</li>
<li>注意系统的字符集；en_US.UTF-8 , 如果字符集出现问题修改成 C ( <code>export LANG=c</code> )</li>
<li>快速掌握正则：配合 grep -o 参数学习</li>
</ul>
<p>1.4 正则符号</p>
<table>
<thead>
<tr>
<th>分类</th>
<th></th>
<th>命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>基础正则</td>
<td>^  $  ^$   .   *    .*  \</td>
<td>grep/sed/awk</td>
</tr>
<tr>
<td>扩展正则</td>
<td>+ | () {} ?</td>
<td>egrep/sed-r/awk</td>
</tr>
</tbody>
</table>
<p>1.5 正则 vs 通配符</p>
<table>
<thead>
<tr>
<th>分类</th>
<th>用途</th>
<th>支持的命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>正则 (RE)</td>
<td>三剑客，高级语言，进行过滤</td>
<td>三剑客 grep 丶 awk 丶 sed 丶 find</td>
</tr>
<tr>
<td>通配符 (pathname extenslon  或 glob)</td>
<td 1..10="">匹配文件 (文件名)*.txt  *.log</td>
<td>Linux 下面的大部分命令</td>
</tr>
</tbody>
</table>
<p>1.6 基础正则</p>
<p>1)<strong>^</strong></p>
<pre class=" language-language-bash"><code class="language-language-bash">作用：表示以什么开始...的行
例：
搜素文件txt中以a开头的行
grep '^a'  [文件名(txt)]
注：如果没有任何提示，则表示要么字符有问题或者没有已a开头的行
</code></pre>
<p>2)$</p>
<pre class=" language-language-bash"><code class="language-language-bash">作用：表示已什么..结尾
例：
搜素文件txt中以a结尾的行
grep 'a$'  [文件名(txt)]
注：搜素结尾$得在后面
</code></pre>
<p>3)^$</p>
<pre class=" language-language-bash"><code class="language-language-bash">作用：表示搜素空行
空行这一行中没有任何内容(空格也是符号)
例：
搜素文件txt中的空行
grep '^$'  [文件名(txt)]
-v:反向抓取，也可用于排除(我想搜索123，加-v的话就是除了123显示 其他都显示)
</code></pre>
<p>4）.</p>
<pre class=" language-language-bash"><code class="language-language-bash">表示任意一个字符(.不匹配空行)
</code></pre>
<p>5）\ 转义字符</p>
<pre class=" language-language-bash"><code class="language-language-bash">作用：表示去除原本特殊含义
例;
搜素文件txt.(点)结尾的行
[root@hadoop100 ~]# grep '.$' txt 
ifgdsfgd
sdfsss.
trete.g
gdfgd
eryer
str.
srtgrt
trtg
dfsfds.d
注;如果以.$正则来搜索的话，结果是任意一个字符结尾的行
[root@hadoop100 ~]# grep '\.$' txt 
sdfsss.
str.
加上\转义符后，就去除了.(点)原本的匹配任意字符的含义
</code></pre>
<ul>
<li>
<p>转义字符序列 (部分)</p>
<ul>
<li>\n  表示回车换行</li>
<li>\t  表示 tab 键</li>
</ul>
</li>
</ul>
<p>6）*</p>
<pre class=" language-language-sh"><code class="language-language-sh">作用：*(星号)前一个字符匹配连续出现0次或者次以上
例：
[root@hadoop100 ~]# grep 's*' txt 
ifgdsfgd
sdfsss.
trete.g

gdfgd
eryer
str.

srtgrt
trtg
dfsfds.d
注：刚开始*比较少单独用，熟练掌握正则后
</code></pre>
<p>7）.</p>
<pre class=" language-language-bash"><code class="language-language-bash">作用：在正则表达式里面表示所有内容， 任何内容，任意内容
整体记忆：.*表示所有即可
拆分： .（点）任意一个字符+ *前一个字符出现0次或者0次以上，加起来就表示所有了
</code></pre>
<ul>
<li>扩展
<ul>
<li>匹配以 s 开头到的任意结尾行
<ul>
<li>[root@hadoop100 ~]# grep ‘^s.*’ txt<br>
sdfsss.<br>
str.<br>
srtgrt<br>
sdadwaet</li>
</ul>
</li>
<li>匹配以 s 开头 t 结尾的行，中间任意内容
<ul>
<li>[root@hadoop100 ~]# grep ‘^s.*t’ txt<br>
str.<br>
srtgrt<br>
sdadwaet</li>
</ul>
</li>
<li>正则特色
<ul>
<li>正则表达式得到贪婪行，.* 表示所有或 * 连续出现的时候，会尽可能的过度匹配</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol start="8">
<li>[] 中括号</li>
</ol>
<pre class=" language-language-bash"><code class="language-language-bash">[abc] 1次匹配1个字符，匹配任何一个字符[a或b或c]
[]里面的内容去掉特殊意义，比如.在括号里面就是普通点
例;
[root@hadoop100 ~]# cat txt 
ifgdsfgd
sdfsss.
trete.g

gdfgd
eryer
str.

srtgrt
trtg
dfsfds.d
sdadwaet
[root@hadoop100 ~]# grep '[abc]' txt 
sdadwaet
注：通常如果匹配多个字符的情况下可以用什么到什么来写
如：匹配a到z的行
[root@hadoop100 ~]# grep '[a-z]' txt 
ifgdsfgd
sdfsss.
trete.g
gdfgd
eryer
str.
srtgrt
trtg
dfsfds.d
sdadwaet

如何匹配多个不同字符
例;匹配txt文件中的大写和数字
[root@hadoop100 ~]# grep '[A-Z0-9]' txt 
AdwsXfs
F
 oDSADSA
543DASA
注：大小写可以简写成a-Z

</code></pre>
<p>9）[^]</p>
<pre class=" language-language-bash"><code class="language-language-bash">作用：取反丶排除
例：
grep '[^abc]' txt
表示：从txt中标记所有的包含abc的词，输出剩下行
</code></pre>
<p>10）总结</p>
<table>
<thead>
<tr>
<th>基础正则</th>
<th>含义</th>
<th>搭配</th>
</tr>
</thead>
<tbody>
<tr>
<td>^</td>
<td>以… 开头的行</td>
<td></td>
</tr>
<tr>
<td>$</td>
<td>以… 结尾的行</td>
<td></td>
</tr>
<tr>
<td>^$</td>
<td>表示空行</td>
<td>搭配固定</td>
</tr>
<tr>
<td>.</td>
<td>任意一个字符</td>
<td></td>
</tr>
<tr>
<td>*</td>
<td>前一个字符连续出现 0 次或者 0 次以上</td>
<td></td>
</tr>
<tr>
<td>.*</td>
<td>表示所有内容</td>
<td>搭配</td>
</tr>
<tr>
<td>\</td>
<td>转义符字符，、\n  \t</td>
<td></td>
</tr>
<tr>
<td>正则贪婪性</td>
<td>.* 的时候或者是连续出现</td>
<td>一般与 + 号搭配</td>
</tr>
<tr>
<td>[]</td>
<td>一个整体，匹配里面任意一个字符</td>
<td></td>
</tr>
<tr>
<td>[^]</td>
<td>取反，排除，也是一个整体</td>
<td></td>
</tr>
</tbody>
</table>
<p>1.7 扩展正则</p>
<table>
<thead>
<tr>
<th>符号</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td></td>
<td></td>
</tr>
<tr>
<td>|</td>
<td></td>
<td></td>
</tr>
<tr>
<td>（）</td>
<td></td>
<td></td>
</tr>
<tr>
<td>{}</td>
<td></td>
<td></td>
</tr>
<tr>
<td>？</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>1）+  前一个字符出现 1 次或者 1 次以上</p>
<pre class=" language-language-bash"><code class="language-language-bash">注：grep不支持扩展正则，得用egrep
[root@hadoop102 ~]# grep '6+' txt 
[root@hadoop102 ~]# egrep '6+' txt 
434666666
34235435643
#或者在+前面加上转义字符\
[root@hadoop102 ~]# grep '6\+' txt 
434666666
34235435643

</code></pre>
<ul>
<li>匹配出连续出现的数字</li>
</ul>
<pre class=" language-language-bash"><code class="language-language-bash">[root@hadoop102 ~]# egrep '[0-9]+' txt 
434666666
34235435643
5e5y
e5745y
# -o；只输出匹配的内容
[root@hadoop102 ~]# egrep -o '[0-9]+' txt 
434666666
34235435643
5
5
5745

</code></pre>
<p>2）|  或者</p>
<pre class=" language-language-bash"><code class="language-language-bash">#同中括号大同小异，中括号解决不了就可以用 | 
[root@hadoop102 ~]# cat txt 
sdfsdfs
sdfsdfs
ddddghggrr
cxgrsg
434666666
dtsfgdrge
34235435643
 


etrtgr
5e5y
y
e5745y
rtd:wq
[root@hadoop102 ~]# egrep 'e|4' txt 
434666666
dtsfgdrge
34235435643
etrtgr
5e5y
e5745y
	
</code></pre>
<table>
<thead>
<tr>
<th>符号</th>
<th>含义</th>
<th>应用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td>[]</td>
<td>1 次匹配一个字符</td>
<td>匹配单个字符 [] 和 +</td>
</tr>
<tr>
<td>|</td>
<td>匹配 1 个字符或者多个字符</td>
<td>匹配单词的时候</td>
</tr>
</tbody>
</table>
<p>3） （） 被括起来的内容，表示一个整体   反向引用（一般用于 sed）</p>
<ul>
<li>被括起来的内容，表示一个整体</li>
<li>反向引用（一般用于 sed）</li>
</ul>
<ol start="4">
<li>{}  连续出现 o {n，m}  前一个字母 o 最少连续出现 n 次，最多出现 m 次</li>
</ol>
<table>
<thead>
<tr>
<th>符号</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td n，m="">o</td>
<td>前一个字母 o 最少连续出现 n 次，最多出现 m 次</td>
<td></td>
</tr>
<tr>
<td n="">o</td>
<td>前一个字母 o 连续出现 n 次</td>
<td></td>
</tr>
</tbody>
</table>
<p><img src="https://s2.loli.net/2023/07/07/JWEUfjDHGdhlwNi.png" alt=""></p>
<p>5） ？ 前一个字符出现 0 次或者 1 次</p>
<p><img src="https://s2.loli.net/2023/07/07/WvfJxtU6C1ZK7Nd.png" alt=""></p>
<p>6） 扩展正则总结</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>含义</th>
<th>搭配</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>前一个字符出现 1 次或者 1 次以上</td>
<td>[]+</td>
</tr>
<tr>
<td>|</td>
<td>或者</td>
<td></td>
</tr>
<tr>
<td>[]</td>
<td>一个整体，sed 反向引用</td>
<td></td>
</tr>
<tr>
<td>{}</td>
<td>前一个字母 o 最少连续出现 n 次，最多出现 m 次</td>
<td></td>
</tr>
<tr>
<td>?</td>
<td>前一个字符出现 0 次或者 1 次</td>
<td></td>
</tr>
</tbody>
</table>
<p>2.1 三剑客</p>
<p>三剑客的特点及应用</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>特点</th>
<th>应用</th>
</tr>
</thead>
<tbody>
<tr>
<td>grep</td>
<td>过滤丶查找</td>
<td>grep 过滤的速度是最快的</td>
</tr>
<tr>
<td>sed</td>
<td>替换，修改文件内容丶取 行</td>
<td>如果要替换 / 修改文件内容，取出某个范围的值</td>
</tr>
<tr>
<td>awk</td>
<td>取列，统计计算</td>
<td>取列丶对比比较丶统计计算</td>
</tr>
</tbody>
</table>
<p>grep</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>含义</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>-E</td>
<td>=egrep</td>
<td></td>
</tr>
<tr>
<td>-A</td>
<td>例：-A5 匹配你要的内容显示下接来的 5 行</td>
<td></td>
</tr>
<tr>
<td>-B</td>
<td>例：-B5 匹配你要的内容显示接上面的 5 行</td>
<td></td>
</tr>
<tr>
<td>-C</td>
<td>例：-C 5 匹配你要的内容显示上下面的 5 行</td>
<td></td>
</tr>
<tr>
<td>-c</td>
<td>统计出现了多少次行，同 wc -l</td>
<td></td>
</tr>
<tr>
<td>-v</td>
<td>取反丶排除 (行)</td>
<td></td>
</tr>
<tr>
<td>-n</td>
<td>显示行号</td>
<td></td>
</tr>
<tr>
<td>-i</td>
<td>忽略大小写</td>
<td></td>
</tr>
<tr>
<td>-w</td>
<td>匹配单词</td>
<td></td>
</tr>
</tbody>
</table>
<p>-o                        精确过滤</p>
<p><img src="https://s2.loli.net/2023/07/07/ZqPkL2SydC8xQjm.png" alt=""></p>
<p>sed</p>
<p>字符串替换</p>
<pre class=" language-language-bash"><code class="language-language-bash">语法：sed 's/原字符串/替换字符串/' [文件路径]
#注意：
#若存在特殊字符，需要使用反斜线\进行转义；
#若存在单引号，外层的单引号改成双引号 sed "s/原字符串/替换字符串/"
#删除某一个字符串可写为：sed 's/原字符串//g'
替换所有匹配到的关键字：
sed 's/原字符串/替换字符串/g'
# 在末尾加g替换每一个匹配的关键字,否则只替换每行的第一个
#替换文件整行内容：
例：把unr第四行替换成www.baidu
[root@hadoop102 ~]#sed -i '4c\www.baidu' unr   
选项	功能
-e	直接在命令行模式上进行sed动作编辑，此为默认选项
-f	将sed的动作写在一个文件内，用–f filename 执行filename内的sed动作
-i	直接修改文件内容
-n	只打印模式匹配的行
-r	支持扩展正则表达式
-h --help	显示帮助
-v --version	显示版本信息
#命令：
a\	在当前行下面插入文本
i\	在当前行上面插入文本
c\	把选定的行改为新的文本
d	删除，删除选择的行
D	删除模板块的第一行
s	替换指定字符
h	拷贝模板块的内容到内存中的缓冲区
H	追加模板块的内容到内存中的缓冲区
g	获得内存缓冲区的内容，并替代当前模板块中的文本
G	获得内存缓冲区的内容，并追加到当前模板块文本的后面
l	列表不能打印字符的清单
n	读取下一个输入行，用下一个命令处理新的行而不是用第一个命令
N	追加下一个输入行到模板块后面并在二者间嵌入一个新行，改变当前行号码
p	打印模板块的行
P	打印模板块的第一行
q	退出Sed
b	lable 分支到脚本中带有标记的地方，如果分支不存在则分支到脚本的末尾
r	file 从file中读行
t	label if分支，从最后一行开始，条件一旦满足或者T，t命令，将导致分支到带有标号的命令处，或者到脚本的末尾
T	label 错误分支，从最后一行开始，一旦发生错误或者T，t命令，将导致分支到带有标号的命令处，或者到脚本的末尾
w	file 写并追加模板块到file末尾
W	file 写并追加模板块的第一行到file末尾
!	表示后面的命令对所有没有被选定的行发生作用
=	打印当前行号
#	把注释扩展到下一个换行符以前
#sed 替换标记 (s 替换脚本命令)
标记	作用
n	1~512 之间的数字，表示指定要替换的字符串出现第几次时才进行替换，例如，一行中有 3 个 A，但用户只想替换第二个 A，这时就用到这个标记
g	行内全局替换，如果没有 g，则只会在第一次匹配成功时做替换操作。例如，一行数据中有 3 个 A，则只会替换第一个 A
p	会打印与替换命令中指定的模式匹配的行。此标记通常与 -n 选项一起使用
w	将缓冲区中的内容写到指定的 file 文件中
x	互换模板块中的文本和缓冲区中的文本
y	把一个字符翻译为另外的字符（但是不用于正则表达式）
\n	匹配第n个子串，该子串之前在pattern中用 () 指定
&	已匹配字符串标记，用正则表达式匹配的内容进行替换
\	转义（转义替换部分包含：&、\ 等）
</code></pre>
<ul>
<li>特点及格式
<ul>
<li>sed stram edior 流编辑器，sed 把处理的内容 (文件) 当作是水，源源不断的进行处理，直到文件末尾</li>
<li>sed 格式</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>命令</th>
<th>选项</th>
<th>(s）sed 命令功能 (g) 修饰符</th>
</tr>
</thead>
<tbody>
<tr>
<td>sed</td>
<td>-r</td>
<td>‘s#oldboy#oldgirl#g’</td>
</tr>
</tbody>
</table>
<ul>
<li>sed 命令核心功能</li>
</ul>
<table>
<thead>
<tr>
<th>功能</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>s</td>
<td>替换 (substitute)  sub</td>
</tr>
<tr>
<td>P</td>
<td>显示</td>
</tr>
<tr>
<td>d</td>
<td>delete</td>
</tr>
<tr>
<td>cai</td>
<td>增加</td>
</tr>
</tbody>
</table>
<p>3） sed 查找</p>
<p>选项：</p>
<p>-n：按行号查找，搭配<strong> p</strong> 使用  例：sed  -n ‘5p’  jiujiu.txt  注：如果不加 - n，则原文输出并重复输出指定行一遍 - e      多重编辑，且命令顺序会影响结果<br>
 - f       指定一个 sed 脚本文件到命令行执行，<br>
-r       Sed 使用扩展正则<br>
 - i       直接修改文档读取的内容，不在屏幕上输出</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr>
<td>p</td>
<td>行号的意思</td>
</tr>
<tr>
<td>d</td>
<td>删除（不加 - 选项 ）</td>
</tr>
</tbody>
<tbody>
<tr>
<td>查找格式</td>
<td></td>
</tr>
<tr>
<td>------------------</td>
<td>------------------------------------------------------------</td>
</tr>
<tr>
<td>‘2p’</td>
<td>指定行号查找</td>
</tr>
<tr>
<td>‘1,5p’</td>
<td>指定行号范围查找</td>
</tr>
<tr>
<td>‘/xxxx/p’</td>
<td>类似于‘grep’过滤，// 里面可以写正则  例：sed -n ‘/^s/p’  jiujiu.txt</td>
</tr>
<tr>
<td>‘/10:00/,/11:00/p’</td>
<td>表示范围的过滤，如果结尾范围输错，则从哪里开始查找输出到结尾</td>
</tr>
</tbody>
</table>
<p>4）删除 d</p>
<table>
<thead>
<tr>
<th>删除格式</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>‘2d’</td>
<td>指定行号删除</td>
</tr>
<tr>
<td>‘1,5d’</td>
<td>指定行号范围删除</td>
</tr>
<tr>
<td>‘/xxxx/’</td>
<td>类似于‘grep’过滤，// 里面可以写正则  例：sed -n ‘/^s/d’  jiujiu.txt</td>
</tr>
<tr>
<td>‘/10:00/,/11:00/p’</td>
<td>表示范围的过滤，如果结尾范围输错，则从哪里开始删除输出到结尾</td>
</tr>
<tr>
<td>注：d 是删除一行</td>
<td>常用：例 sed ‘5d’ jiujiu.txt</td>
</tr>
</tbody>
</table>
<p>案例：删除文件中得到空行和包含 #的行</p>
<pre class=" language-language-bash"><code class="language-language-bash">egrep -v '^$|#' /etc/ssh/sshd_config
sed -r '/^$|#/d' /etc/ssh/sshd_config


# !的妙用
在sed和awk中表示取反
sed -nr '/^$|#/!p' /etc/ssh/sshd_config  #!p表示不显示空行/包含#号的行	
</code></pre>
<p>5）增加 ：cai</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>含义</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>c   （replace）替代</td>
<td>替换这行的内容</td>
<td></td>
</tr>
<tr>
<td>**a ** （append）追加    * 重点</td>
<td>向指定的行或每一行追加内容 （相当于 &gt;&gt;）【行的末尾追加】</td>
<td></td>
</tr>
<tr>
<td>i      (insert) 插入</td>
<td>向指定的行或每一行插入内容  （行的前面插入）</td>
<td></td>
</tr>
</tbody>
</table>
<p>例：</p>
<pre class=" language-language-bash"><code class="language-language-bash">#在txt中第四行下面追加一句jiujiu
[root@hadoop100 ~]# sed '4a jiujiu' txt 
#在txt中第四行上面追加一句jiujiu
[root@hadoop100 ~]# sed '4i jiujiu' txt
#把txt中第四行删除并改为jiujiu
[root@hadoop100 ~]# sed '4c jiujiu' txt
</code></pre>
<p>试题：</p>
<p>向 config 文件中追加多行内容</p>
<pre class=" language-language-bash"><code class="language-language-bash">#需追加内容为：
UseDNS no
GSSAPIAUTCATTON no
permitRootLogin no
 #方法一
 cat >> config << EOF
 UseDNS no
GSSAPIAUTCATTON no
permitRootLogin no
EOF
#如果要追加的内容包含特殊符号，则在EOF两边加是‘’
#方法二
sed '$a UseDNS no\GSSAPIAUTCATTON no\permitRootLogin no'  config
</code></pre>
<p>6) 替换：s</p>
<p>替换格式：</p>
<pre class=" language-language-bash"><code class="language-language-bash">语法：sed 's#xxx#xxx#g'
  s:#想要的搜索内容#想替换的内容#g   
  s：搜索                     g：全局
</code></pre>
<p>反向引用：</p>
<p>口诀：先保护，在使用</p>
<pre class=" language-language-bash"><code class="language-language-bash">例：把hello，world前后反过来
[root@hadoop102 ~]# echo hello,world 
hello,world
[root@hadoop102 ~]# echo hello,world | sed -r 's#(^.*),(.*$)#\2 \1#g'
world hello

注：尽量使用#
</code></pre>
<p>awk</p>
<p>1）awk 基本概念</p>
<pre class=" language-language-bash"><code class="language-language-bash">  awk 是一个按需求格式化文本再进行输出的工具。
  和 sed 命令类似，awk 命令也是逐行扫描文件（从第 1 行到最后一行），寻找含有目标文本的行，如果匹配成功，则会在该行上执行用户想要的操作；反之，则不对行做任何处理。
  awk -f 脚本文件 数据文件  执行awk脚本文件
  awk 的应用场景：
看下 awk 能干些什么事情：
1. 能够将给定的文本内容，按照我们期望的格式输出显示，打印成报表。
2. 分析处理系统日志，快速地分析挖掘我们关心的数据，并生成统计信息；
3. 方便地用来统计数据，比如网站的访问量，访问的 IP 量等；
4. 通过各种工具的组合，快速地汇总分析系统的运行信息，让你对系统的运行了如指掌；
5. 强大的脚本语言表达能力，支持循环、条件、数组等语法，助你分析更加复杂的数据；
awk 不是万能的，它比较擅长处理格式化的文本，比如 日志、 csv 格式数据等；
</code></pre>
<p>awk 的工作流程图如图</p>
<p><img src="https://s2.loli.net/2023/07/07/Rgnm7lUWc3V5GaX.png" alt=""></p>
<p>工作原理：</p>
<p>逐行读取文本，默认以空格或 tab 键为分隔符进行分隔，将分隔所得的各个字段保存到内建变量中，并按模式或者条件执行编辑命令。</p>
<p>在使用 awk 命令的过程中，可以使用逻辑操作符 “&amp;&amp;” 表示 “与”、“||” 表示 “或”、“!” 表示 “非”；还可以进行简单的数学运算，如 +、-、*、/、%、^ 分别表示加、减、乘、除、取余和乘方。</p>
<p>2）语法</p>
<pre class=" language-language-bash"><code class="language-language-bash">举例：
# awk -F: 'BEGIN&#123;print"-----header-----"&#125; &#123;print $1,$7&#125; END&#123;print"-----footer-----"&#125;' /etc/passwd

</code></pre>
<p>3）awk 结构</p>
<pre class=" language-language-bash"><code class="language-language-bash">1. BEGIN 区域
Begin 区域的语法:
BEGIN &#123; awk-commands &#125;
BEGIN 区域的命令只最开始、在 awk 执行 body 区域命令之前执行一次。
BEGIN 区域很适合用来打印报文头部信息，以及用来初始化变量。
BEGIN 区域可以有一个或多个 awk 命令
关键字 BEGIN 必须要用大写
BEGIN 区域是可选的
2. body 区域
body 区域的语法:
/pattern/ &#123;action&#125;
body 区域的命令每次从输入文件读取一行就会执行一次
如果输入文件有 10 行，那 body 区域的命令就会执行 10 次(每行执行一次)
Body 区域没有用任何关键字表示，只有用正则模式和命令。
Body 区域是可选的
3. END 区域
END 区域的语法:
END &#123; awk-commands &#125;
END 区域在 awk 执行完所有操作后执行，并且只执行一次。
END 区域很适合打印报文结尾信息，以及做一些清理动作
END 区域可以有一个或多个 awk 命令
关键字 END 必须要用大写
END 区域是可选的
提示：如果命令很长，即可以放到单行执行，也可以用\折成多行执行。
</code></pre>
<p>行与列</p>
<table>
<thead>
<tr>
<th>名词</th>
<th>awk 一些叫法</th>
<th>一些说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>行</td>
<td>记录 (record)</td>
<td>每一行默认通过回车分割的</td>
</tr>
<tr>
<td>列</td>
<td>字段 (field)</td>
<td>每一列默认通过空格分割的</td>
</tr>
<tr>
<td>awk 中行与列结束的标记都是可以修改的</td>
<td></td>
<td></td>
</tr>
</tbody>
<tbody>
<tr>
<td>内置变量</td>
<td>功能</td>
</tr>
<tr>
<td>--------</td>
<td>------------------------------------------------------------</td>
</tr>
<tr>
<td>NF</td>
<td>当前处理的行的字段个数（就是：有多少列）</td>
</tr>
<tr>
<td>NR</td>
<td>当前处理的行的行号（就是：有多少行）例：NR==1 [取出某一行]</td>
</tr>
<tr>
<td>FNR</td>
<td>读取文件的记录数（行号），从 1 开始，新的文件重新从 1 开始计数</td>
</tr>
<tr>
<td>$0</td>
<td>当前处理的行的整行内容（就是：表示一行的内容）</td>
</tr>
<tr>
<td>$n</td>
<td>当前处理行的第 n 个字段（就是：第 n 列）</td>
</tr>
<tr>
<td>FILENAME</td>
<td>被处理的文件名</td>
</tr>
<tr>
<td>FS</td>
<td>指定每行的字段分隔符，默认为空格或制表位（相当于选项 -F ）</td>
</tr>
<tr>
<td>OFS</td>
<td>输出字段的分隔符，默认也是空格</td>
</tr>
<tr>
<td>RS</td>
<td>行分割符。awk 从文件上读取资料时，将根据 Rs 的定义把资料切割成许多条记录，而 awk 一次仅读取一条记录，预设值是 “\n“</td>
</tr>
<tr>
<td>ORS</td>
<td>输出分割符，默认也是换行符</td>
</tr>
</tbody>
</table>
<p>1）取行</p>
<table>
<thead>
<tr>
<th>awk</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>NR==1</td>
<td>取出某一行</td>
</tr>
<tr>
<td>NR&gt;=1&amp;&amp;（并且）NR&lt;=5</td>
<td>取出 1 到 5 行范围</td>
</tr>
<tr>
<td>常用符号</td>
<td>&gt;  &lt;=&gt;=   &lt;=   ==  !=（不等于）</td>
</tr>
<tr>
<td>/jiujiu/</td>
<td>//(双斜线搜索 / 过滤)</td>
</tr>
<tr>
<td>/xx/，/xx/</td>
<td>例：[root@hadoop102 ~]# awk ‘/1/,/4/’ like<br/>1hello ,world<br/>2like<br/>4linux</td>
</tr>
</tbody>
</table>
<p>2）取列</p>
<p>在 awk 中取列首先要认识 - F</p>
<ul>
<li>-F：指定分隔符，指定每一列结束标记 (默认是空格 / 连续的空格 / 还有 tab 键)</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>数字：表示取出某一列注意：在</mtext><mi>a</mi><mi>w</mi><mi>k</mi><mtext>中</mtext></mrow><annotation encoding="application/x-tex">数字：表示取出某一列 注意：在awk中</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">字</span><span class="mord cjk_fallback">：</span><span class="mord cjk_fallback">表</span><span class="mord cjk_fallback">示</span><span class="mord cjk_fallback">取</span><span class="mord cjk_fallback">出</span><span class="mord cjk_fallback">某</span><span class="mord cjk_fallback">一</span><span class="mord cjk_fallback">列</span><span class="mord cjk_fallback">注</span><span class="mord cjk_fallback">意</span><span class="mord cjk_fallback">：</span><span class="mord cjk_fallback">在</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord cjk_fallback">中</span></span></span></span>内容一个意思，表示取出某一列</li>
<li>$0: 表示整行的内容</li>
<li print="" xxx="">取列一般是</li>
<li>$NF: 表示取最后一列</li>
</ul>
<p>小结</p>
<ul>
<li>行与列的认知，[行：记录   列：字段 / 域]</li>
<li>awk 取行与取列</li>
<li></li>
</ul>
<p>awk 模式匹配</p>
<table>
<thead>
<tr>
<th>awk</th>
<th>-F&quot;[ /]+&quot;</th>
<th>‘NR==2{print $2}’</th>
</tr>
</thead>
<tbody>
<tr>
<td>命令</td>
<td>选项</td>
<td>‘条件 {动作}’</td>
</tr>
</tbody>
</table>
<ul>
<li>比较符号：&lt;(小于)  &gt;(大于)  =（等于） &gt;=(大于等于)  &lt;=(小于等于)   !=(不等于)</li>
<li>正则：</li>
<li>范围： 表达式 ；</li>
<li>特殊条件：BEGIN 和 END</li>
</ul>
<p>1）比较表达式 - 参考上面取行部分</p>
<p>2）正则：</p>
<ul>
<li>//(双划线) 支持扩展正则</li>
<li>awk 可以精确到某一列，某一列中包含 / 不包含… 内容</li>
<li>~  ：包含</li>
<li>!~: 不包含</li>
</ul>
<table>
<thead>
<tr>
<th>正则</th>
<th>awk 正则</th>
</tr>
</thead>
<tbody>
<tr>
<td>^  表示… 开头</td>
<td>某一列的开头  $2~/^like/ : 第二列以 like 开头的</td>
</tr>
<tr>
<td>$  表示… 结尾</td>
<td>某一列的结尾   <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mtext> </mtext><mi mathvariant="normal">/</mi><mi>l</mi><mi>i</mi><mi>k</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">2~/like</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mspace nobreak"> </span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal">e</span></span></span></span>/ : 第二列以 like 结尾的</td>
</tr>
<tr>
<td>^$  空行</td>
<td>某一列的空的   2~/^/ : 第二列空行的</td>
</tr>
</tbody>
</table>
<pre class=" language-language-bash"><code class="language-language-bash">练习：
#找出第三列以2开头的行，并显示第一列，第三列，最后一列
文件：/etc/passwd
[root@hadoop102 ~]# awk -F: '$3~/^2/' /etc/passwd| awk -F : '&#123;print $1,$3,$NF&#125;'
#取找出第三列以1或者2开头的行，并显示第一列，第三列，最后一列
 awk -F: '$3~/^[12]/' /etc/passwd| awk -F : '&#123;print $1,$3,$NF&#125;'
 awk -F: '$3~/^1|^2/' /etc/passwd| awk -F : '&#123;print $1,$3,$NF&#125;'
 可以多种写法，主要看正则怎么写
</code></pre>
<p>3）表示范围</p>
<ul>
<li>/ 从哪里开始 /./ 哪里结束 /  常用</li>
<li>NR<mark>1，NR</mark>5  从第一行开始到第五行结束   类似于 sed  -n  ‘1,5p’</li>
</ul>
<p>4) 特殊模式 BEGIN {} 和 END {}</p>
<table>
<thead>
<tr>
<th>模式</th>
<th>含义</th>
<th>应用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td>BEGIN</td>
<td>里面的内容会在 awk<strong> 读取文件之前</strong>执行</td>
<td>1）进行简单的统计，计算，不涉及读取文件（<strong>常用</strong>）<br />2）用来处理文件之前，添加个表头（了解）<br />3) 用来定义 awk 变量（很少用，因为可以用 - v）</td>
</tr>
<tr>
<td>END</td>
<td>里面的内容会在 awk<strong> 读取文件之后</strong>执行</td>
<td>1）awk 进行统计，一般是过程；<font color=red><strong>先进行计算，最后 END 里面输出结果</strong></font>（常用）<br />2）awk 使用数组，用来输出数组结果（常用）</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>END {} 统计计算</p>
</li>
<li>
<p>统计方法：</p>
<table>
<thead>
<tr>
<th>统计方法</th>
<th>简写形式</th>
<th>应用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td>i++</td>
<td>i=i+1</td>
<td>计数型，统计次数</td>
</tr>
<tr>
<td>sum=sum+??</td>
<td>sum+=??</td>
<td>求和，累加</td>
</tr>
<tr>
<td>注意：i  sum  都是变量，可以随便写</td>
<td></td>
<td></td>
</tr>
<tr>
<td>array[]=array[]+1</td>
<td>array[]++</td>
<td>数组分类计算</td>
</tr>
</tbody>
</table>
</li>
</ul>
<pre class=" language-language-bash"><code class="language-language-bash">统计/etc/service里面有多少个空行
[root@hadoop102 ~]# awk '/^$/&#123;i++&#125;END&#123;print i&#125;' /etc/services 
17
#求1到100的和
[root@hadoop102 ~]# seq 100|awk '&#123;sum=sum+$1&#125;END&#123;print sum&#125;'
5050
如果要显示过程则：
在条件后跟上print xxx
[root@hadoop102 ~]# seq 100|awk '&#123;sum=sum+$1，print sum&#125;END&#123;print sum&#125;'

</code></pre>
<p>5）awk 数组</p>
<ul>
<li>统计日志：类似于统计个每个 ip 出现的字数，统计每种状态码出现的次数 / 统计系统中每个用户被攻击的次数等等…</li>
<li>累加求和；统计每个 ip 消耗的流量</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>shell 数组</th>
<th>awk 数组</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>形式</td>
<td>array[0]=jiujiu   array[1]=like</td>
<td>array[0]=jiujiu   array[1]=like</td>
<td></td>
</tr>
<tr>
<td>使用</td>
<td>echo $(array[0])   echo $(array[1])</td>
<td>print array[0]  array[1]</td>
<td></td>
</tr>
<tr>
<td>批量输出数组内容</td>
<td>for i in $(array[*])<br />do<br />    echo $i <br />done</td>
<td>for (i in array)<br />      print i <br />      print  [i]</td>
<td>awk 数组专用循环，变量获取到的是数组的下标，如果想要数组内容 用 a [i]   注释 1</td>
</tr>
</tbody>
</table>
<pre class=" language-language-bash"><code class="language-language-bash">#awk数组一般定义和使用
[root@hadoop102 ~]# awk 'BEGIN&#123;a[0]=jiujiu;a[1]=like; print a[0],a[1]&#125;'
 
[root@hadoop102 ~]# #这里显示空白是因为在awk中字母会被识别为变量，如果只是想
[root@hadoop102 ~]# #使用字符串需要用双引号引起来
[root@hadoop102 ~]# #数字不受影响
[root@hadoop102 ~]# awk 'BEGIN&#123;a[0]=123;a[1]=321; print a[0],a[1]&#125;'
123 321
[root@hadoop102 ~]# awk 'BEGIN&#123;a[0]="jiujiu";a[1]="like"; print a[0],a[1]&#125;'
jiujiu like

</code></pre>
<pre class=" language-language-bash"><code class="language-language-bash">#注释1：awk数组专用
[root@hadoop102 ~]# awk 'BEGIN&#123;a[0]=123;a[1]=321; for (i in a) print i&#125;'
0
1
[root@hadoop102 ~]# awk 'BEGIN&#123;a[0]=123;a[1]=321; for (i in a) print a[i]&#125;'
123
321

</code></pre>
<p>练习题：</p>
<pre class=" language-language-bash"><code class="language-language-bash">#统计以下域名出现次数(用awk)
https://blog.driverzeng.com/index.html
https://blog.driverzeng.com/index.html
https://blog.driverzeng.com/index.html
https://blog.driverzeng.com/1.html
http://post.driverzeng.com/index.html
https://blog.driverzeng.com/1.html
https://blog.driverzeng.com/1.html
http://mp3.driverzeng.com/index.html
https://blog.driverzeng.com/1.html
https://blog.driverzeng.com/3.html
http://post.driverzeng.com/2.html
http://post.driverzeng.com/2.html
http://post.driverzeng.com/2.html
http://post.driverzeng.com/2.html
http://post.driverzeng.com/2.html
http://post.driverzeng.com/2.html


[root@hadoop102 ~]# cat 111 | awk -F '/' '&#123;array[$3]++&#125;END&#123;for (i in array)print i,array[i]&#125;' 111 
blog.driverzeng.com 8
post.driverzeng.com 7
mp3.driverzeng.com 1

#array[]++ 你要统计什么  []里面就是什么(某一列
#比如：统计access.log中ip出现的次数  array[$1]

</code></pre>
<p>注意：使用 awk 统计日志，尽量精确匹配</p>
<p>6）for 循环 /if 判断</p>
<table>
<thead>
<tr>
<th>shell 编程 c 语言 for 循环</th>
<th>awk  for 循环</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>for((i=1;i&lt;=10;i++))<br />do<br />      echo '$i’<br />down</td>
<td>for(i=1;1&lt;=10;i++)<br />print i</td>
<td>awk  for 循环用来循环每个字段</td>
</tr>
</tbody>
</table>
<pre class=" language-language-bash"><code class="language-language-bash">例：
1+100的和
[root@hadoop102 ~]# awk 'BEGIN&#123;for(i=1;i<=100;i++)sum+=i;print sum&#125;'
5050

[root@hadoop102 ~]# awk 'BEGIN&#123;
for(i=1;i<=100;i++)
	sum+=i;
print sum
&#125;'
5050

</code></pre>
<p>if 判断</p>
<table>
<thead>
<tr>
<th>shell  if    判断</th>
<th>awk  if  判断</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>if[“who” -eq  20 ];then<br />     echo ’成年人’<br />fi</td>
<td>if（条件）<br /> print &quot; 成年人”</td>
<td>常用</td>
</tr>
<tr>
<td>if[“who” -eq  20 ];then<br />     echo ’成年人’<br /> else<br />     echo &quot; 未成年人 “<br /> fi</td>
<td>if（条件）<br />      print &quot; 成年人”<br /> else<br />      print &quot; 未成年人 “</td>
<td></td>
</tr>
</tbody>
</table>
<p>例子：</p>
<pre class=" language-language-bash"><code class="language-language-bash">统计磁盘空间使用率，如果大于1%，则提示磁盘空间不足，并显示磁盘分区，磁盘使用率，磁盘挂载点
[root@hadoop102 ~]# df -h
Filesystem               Size  Used Avail Use% Mounted on
devtmpfs                 2.1G     0  2.1G   0% /dev
tmpfs                    2.1G     0  2.1G   0% /dev/shm
tmpfs                    2.1G   12M  2.1G   1% /run
tmpfs                    2.1G     0  2.1G   0% /sys/fs/cgroup
/dev/mapper/centos-root   45G  1.5G   44G   4% /
/dev/sda1                3.0G  138M  2.9G   5% /boot
tmpfs                    423M     0  423M   0% /run/user/0
[root@hadoop102 ~]# df -h | awk -F '[ %]+' 'NR>1&#123;if($5>=1)print "disk no enough",$1,$5,$NF&#125;'
disk no enough tmpfs 1 /run
disk no enough /dev/mapper/centos-root 4 /
disk no enough /dev/sda1 5 /boot
#注意：
awk使用多个条件的时候，第一个条件可以放在‘条件&#123;动作&#125;’ 第二个条件一般使用if判断
</code></pre>
<p>试题：</p>
<p>统计这段语句中，单词字符数小于 6 的单词 ，显示出来</p>
<p>Life is too short to spend time with people who suck the happiness out of you</p>
<pre class=" language-language-bash"><code class="language-language-bash">[root@hadoop102 ~]# echo Life is too short to spend time with people who suck the happiness out of you
awk '&#123;for(i=1;i<=NF;i++) if(length($i)<6) print $i&#125;'
Life
is
too
short
to
spend
time
with
who
suck
the
out
of
you
</code></pre>
<p>awk 函数</p>
<pre class=" language-language-bash"><code class="language-language-bash">length：统计
[root@hadoop102 ~]# echo jiujiu | awk '&#123;print length()&#125;'
6
[root@hadoop102 ~]# echo jiujiu like | awk '&#123;print length($1)&#125;'
6
[root@hadoop102 ~]# echo jiujiu like | awk '&#123;print length($2)&#125;'
4
如果不属于$1/$2则默认$0整行输出
</code></pre>
<p>正则支持表</p>
<table>
<thead>
<tr>
<th>字符</th>
<th>说明</th>
<th>Basic RegEx</th>
<th>Extended RegEx</th>
<th>python RegEx</th>
<th>Perl regEx</th>
</tr>
</thead>
<tbody>
<tr>
<td>转义</td>
<td></td>
<td>\</td>
<td>\</td>
<td>\</td>
<td>\</td>
</tr>
<tr>
<td>^</td>
<td>匹配行首，例如’^dog’匹配以字符串 dog 开头的行（注意：awk 指令中，’^' 则是匹配字符串的开始）</td>
<td>^</td>
<td>^</td>
<td>^</td>
<td>^</td>
</tr>
<tr>
<td>$</td>
<td>匹配行尾，例如：’^、dog 匹配以字符串为结尾的行（注意：指令中，' 则是匹配字符串的结尾）</td>
<td>$</td>
<td>$</td>
<td>$</td>
<td>$</td>
</tr>
<tr>
<td>^$</td>
<td>匹配空行</td>
<td>^$</td>
<td>^$</td>
<td>^$</td>
<td>^$</td>
</tr>
<tr>
<td>^string$</td>
<td>匹配行，例如：’^dog$' 匹配只含一个字符串 dog 的行</td>
<td>^string$</td>
<td>^string$</td>
<td>^string$</td>
<td>^string$</td>
</tr>
<tr>
<td>&lt;</td>
<td>匹配单词，例如：’&lt;frog’ （等价于’\bfrog’），匹配以 frog 开头的单词</td>
<td>&lt;</td>
<td>&lt;</td>
<td><strong>不支持</strong></td>
<td><strong>不支持</strong>（但可以使用 \b 来匹配单词，例如：’\bfrog’）</td>
</tr>
<tr>
<td>&gt;</td>
<td>匹配单词，例如：‘frog&gt;’（等价于’frog\b '），匹配以 frog 结尾的单词</td>
<td>&gt;</td>
<td>&gt;</td>
<td><strong>不支持</strong></td>
<td><strong>不支持</strong>（但可以使用 \b 来匹配单词，例如：‘frog\b’）</td>
</tr>
<tr>
<td><x></td>
<td>匹配一个单词或者一个特定字符，例如：’<frog>’（等价于’\bfrog\b’）、’<G>’</td>
<td><x></td>
<td><x></td>
<td><strong>不支持</strong></td>
<td><strong>不支持</strong>（但可以使用 \b 来匹配单词，例如：’\bfrog\b’</td>
</tr>
<tr>
<td>()</td>
<td>匹配表达式，例如：不支持’（frog）’</td>
<td><strong>不支持</strong>（但可以使用，如：dogdog</td>
<td>()</td>
<td>()</td>
<td>()</td>
</tr>
<tr>
<td></td>
<td>匹配表达式，例如：不支持’（frog）’</td>
<td></td>
<td><strong>不支持</strong>（同 ())</td>
<td><strong>不支持</strong>（同 ())</td>
<td><strong>不支持</strong>（同 ())</td>
</tr>
<tr>
<td>？</td>
<td>匹配前面的子表达式 0 次或 1 次（等价于 {0,1}），例如：where (is)? 能匹配 &quot;where&quot; 以及 &quot;whereis&quot;</td>
<td><strong>不支持</strong>（同？)</td>
<td>？</td>
<td>？</td>
<td>？</td>
</tr>
<tr>
<td>?</td>
<td>匹配前面的子表达式 0 次或 1 次（等价于’{0,1}’），例如：'whereisis? ' 能匹配 “where&quot;以及&quot;whereis”</td>
<td>?</td>
<td><strong>不支持</strong>（同？)</td>
<td><strong>不支持</strong>（同？)</td>
<td><strong>不支持</strong>（同？)</td>
</tr>
<tr>
<td>?</td>
<td>当该字符紧跟在任何一个其他限制符（*, +, ?, {n},{n,}, {n,m}） 后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。例如，对于字符串 “oooo”，‘o+?’ 将匹配单个 &quot;o&quot;，而 ‘o+’ 将匹配所有 ‘o’</td>
<td><strong>不支持</strong></td>
<td><strong>不支持</strong></td>
<td><strong>不支持</strong></td>
<td><strong>不支持</strong></td>
</tr>
<tr>
<td>.</td>
<td>匹配除换行符（’\n’）之外的任意单个字符（注意：awk 指令中的句点能匹配换行符）</td>
<td>.</td>
<td>.（如果要匹配包括 “\n” 在内的任何一个字符，请使用：’(^$)|（.）</td>
<td>.</td>
<td>.（如果要匹配包括 “\n” 在内的任何一个字符，请使用：’ [.\n] ’</td>
</tr>
<tr>
<td>*</td>
<td>匹配前面的子表达式 0 次或多次（等价于 {0,}），例如：zo* 能匹配 &quot;z&quot; 以及 “zoo”</td>
<td>*</td>
<td>*</td>
<td>*</td>
<td>*</td>
</tr>
<tr>
<td>+</td>
<td>匹配前面的子表达式 1 次或多次（等价于’{1,}’），例如：'whereisis+ ' 能匹配 “whereis&quot;以及&quot;whereisis”</td>
<td>+</td>
<td><strong>不支持</strong>（同 +)</td>
<td><strong>不支持</strong>（同 +)</td>
<td><strong>不支持</strong>（同 +)</td>
</tr>
<tr>
<td>+</td>
<td>匹配前面的子表达式 1 次或多次（等价于 {1,}），例如：zo + 能匹配 &quot;zo&quot; 以及 “zoo”，但不能匹配 “z”</td>
<td><strong>不支持</strong>（同 +)</td>
<td>+</td>
<td>+</td>
<td>+</td>
</tr>
<tr n="">
<td n=""></td>
<td>n 必须是一个 0 或者正整数，匹配子表达式 n 次，例如：zo {2} 能匹配</td>
<td><strong>不支持</strong>（同 {n})</td>
<td n=""></td>
<td n=""></td>
<td></td>
</tr>
<tr n,="">
<td n,=""></td>
<td 2,="">“zooz”，但不能匹配 &quot;Bob&quot;n 必须是一个 0 或者正整数，匹配子表达式大于等于 n 次，例如：go</td>
<td><strong>不支持</strong>（同 {n,})</td>
<td n,=""></td>
<td n,=""></td>
<td></td>
</tr>
<tr n,m="">
<td n,m=""></td>
<td>能匹配 “good”，但不能匹配 godm 和 n 均为非负整数，其中 n &lt;= m，最少匹配 n 次且最多匹配 m 次 ，例如：o {1,3} 将配 &quot;fooooood&quot; 中的前三个 o（请注意在逗号和两个数之间不能有空格）</td>
<td><strong>不支持</strong>（同 {n,m})</td>
<td n,m=""></td>
<td n,m=""></td>
<td></td>
</tr>
<tr>
<td>x|y</td>
<td>匹配 x 或 y，例如： 不支持’z|（food）’ 能匹配 “z” 或 &quot;food&quot;；’（z|f）ood’ 则匹配 &quot;zood&quot; 或 “food”</td>
<td><strong>不支持</strong>（同 x|y)</td>
<td>x|y</td>
<td>x|y</td>
<td>x|y</td>
</tr>
<tr>
<td>[0-9]</td>
<td>匹配从 0 到 9 中的任意一个数字字符（注意：要写成递增）</td>
<td>[0-9]</td>
<td>[0-9]</td>
<td>[0-9]</td>
<td>[0-9]</td>
</tr>
<tr>
<td>[xyz]</td>
<td>字符集合，匹配所包含的任意一个字符，例如：’[abc]' 可以匹配 &quot;lay&quot; 中的 ‘a’（注意：如果元字符，例如：. * 等，它们被放在 [ ] 中，那么它们将变成一个普通字符）</td>
<td>[xyz]</td>
<td>[xyz]</td>
<td>[xyz]</td>
<td>[xyz]</td>
</tr>
<tr>
<td>[^xyz]</td>
<td>负值字符集合，匹配未包含的任意一个字符（注意：不包括换行符），例如：’[^abc]’ 可以匹配 “Lay” 中的’L’（注意：[^xyz] 在 awk 指令中则是匹配未包含的任意一个字符 + 换行符）</td>
<td>[^xyz]</td>
<td>[^xyz]</td>
<td>[^xyz]</td>
<td>[^xyz]</td>
</tr>
<tr>
<td>[A-Za-z]</td>
<td>匹配大写字母或者小写字母中的任意一个字符（注意：要写成递增）</td>
<td>[A-Za-z]</td>
<td>[A-Za-z]</td>
<td>[A-Za-z]</td>
<td>[A-Za-z]</td>
</tr>
<tr>
<td>[^A-Za-z]</td>
<td>匹配除了大写与小写字母之外的任意一个字符（注意：写成递增）</td>
<td>[^A-Za-z]</td>
<td>[^A-Za-z]</td>
<td>[^A-Za-z]</td>
<td>[^A-Za-z]</td>
</tr>
<tr>
<td><strong>\d</strong></td>
<td>匹配从 0 到 9 中的任意一个数字字符（等价于 [0-9]）</td>
<td><strong>不支持</strong></td>
<td><strong>不支持</strong></td>
<td>\d</td>
<td>\d</td>
</tr>
<tr>
<td><strong>\D</strong></td>
<td>匹配非数字字符（等价于 [^0-9]）</td>
<td><strong>不支持</strong></td>
<td><strong>不支持</strong></td>
<td>\D</td>
<td>\D</td>
</tr>
<tr>
<td>\S</td>
<td>匹配任何非空白字符（等价于 [^\f\n\r\t\v]）</td>
<td><strong>不支持</strong></td>
<td><strong>不支持</strong></td>
<td>\S</td>
<td>\S</td>
</tr>
<tr>
<td>\s</td>
<td>匹配任何空白字符，包括空格、制表符、换页符等等（等价于 [\f\n\r\t\v]）</td>
<td><strong>不支持</strong></td>
<td><strong>不支持</strong></td>
<td>\s</td>
<td>\s</td>
</tr>
<tr>
<td>\W</td>
<td>匹配任何非单词字符 (等价于 [^A-Za-z0-9_])</td>
<td>\W</td>
<td>\W</td>
<td>\W</td>
<td>\W</td>
</tr>
<tr>
<td>\w</td>
<td>匹配包括下划线的任何单词字符（等价于 [A-Za-z0-9_]）</td>
<td>\w</td>
<td>\w</td>
<td>\w</td>
<td>\w</td>
</tr>
<tr>
<td>\B</td>
<td>匹配非单词边界，例如：‘er\B’ 能匹配 “verb” 中的’er’，但不能匹配 &quot;never&quot; 中的’er’</td>
<td>\B</td>
<td>\B</td>
<td>\B</td>
<td>\B</td>
</tr>
<tr>
<td>\b</td>
<td>匹配一个单词边界，也就是指单词和空格间的位置，例如： ‘er\b’ 可以匹配 &quot;never&quot; 中的 ‘er’，但不能匹配 “verb” 中的’er’</td>
<td>\b</td>
<td>\b</td>
<td>\b</td>
<td>\b</td>
</tr>
<tr>
<td>\t</td>
<td>匹配一个横向制表符（等价于 \x09 和 \cI）</td>
<td><strong>不支持</strong></td>
<td><strong>不支持</strong></td>
<td>\t</td>
<td>\t</td>
</tr>
<tr>
<td>\v</td>
<td>匹配一个垂直制表符（等价于 \x0b 和 \cK）</td>
<td><strong>不支持</strong></td>
<td><strong>不支持</strong></td>
<td>\v</td>
<td>\v</td>
</tr>
<tr>
<td>\n</td>
<td>匹配一个换行符（等价于 \x0a 和 \cJ）</td>
<td><strong>不支持</strong></td>
<td><strong>不支持</strong></td>
<td>\n</td>
<td>\n</td>
</tr>
<tr>
<td>\f</td>
<td>匹配一个换页符（等价于 \x0c 和 \cL）</td>
<td><strong>不支持</strong></td>
<td><strong>不支持</strong></td>
<td>\f</td>
<td>\f</td>
</tr>
<tr>
<td>\r</td>
<td>匹配一个回车符（等价于 \x0d 和 \cM）</td>
<td><strong>不支持</strong></td>
<td><strong>不支持</strong></td>
<td>\r</td>
<td>\r</td>
</tr>
<tr>
<td>\</td>
<td>匹配转义字符本身 &quot;&quot;</td>
<td>\</td>
<td>\</td>
<td>\</td>
<td>\</td>
</tr>
<tr>
<td>\cx</td>
<td>匹配由 x 指明的控制字符，例如：\cM 匹配一个 Control-M 或回车符，x 的值必须为 A-Z 或 a-z 之一，否则，将 c 视为一个原义的 ‘c’ 字符</td>
<td><strong>不支持</strong></td>
<td><strong>不支持</strong></td>
<td></td>
<td>\cx</td>
</tr>
<tr>
<td>\xn</td>
<td>匹配 n，其中 n 为十六进制转义值。十六进制转义值必须为确定的两个数字长，例如：’\x41’ 匹配 “A”。’\x041’ 则等价于’\x04’ &amp; “1”。正则表达式中可以使用 ASCII 编码</td>
<td><strong>不支持</strong></td>
<td><strong>不支持</strong></td>
<td></td>
<td>\xn</td>
</tr>
<tr>
<td>\num</td>
<td>匹配 num，其中 num 是一个正整数。表示对所获取的匹配的引用</td>
<td><strong>不支持</strong></td>
<td>\num</td>
<td>\num</td>
<td></td>
</tr>
<tr>
<td>[:alnum:]</td>
<td>匹配任何一个字母或数字（[A-Za-z0-9]），例如：’[[:alnum:]] ’</td>
<td>[:alnum:]</td>
<td>[:alnum:]</td>
<td>[:alnum:]</td>
<td>[:alnum:]</td>
</tr>
<tr>
<td>[:alpha:]</td>
<td>匹配任何一个字母（[A－Za－z]）， 例如：’ [[:alpha:]] ’</td>
<td>[:alpha:]</td>
<td>[:alpha:]</td>
<td>[:alpha:]</td>
<td>[:alpha:]</td>
</tr>
<tr>
<td>[:digit:]</td>
<td>匹配任何一个数字（[0-9]），例如：’[[:digit:]] ’</td>
<td>[:digit:]</td>
<td>[:digit:]</td>
<td>[:digit:]</td>
<td>[:digit:]</td>
</tr>
<tr>
<td>[:lower:]</td>
<td>匹配任何一个小写字母（[a-z]）， 例如：’ [[:lower:]] ’</td>
<td>[:lower:]</td>
<td>[:lower:]</td>
<td>[:lower:]</td>
<td>[:lower:]</td>
</tr>
<tr>
<td>[:upper:]</td>
<td>匹配任何一个大写字母（[A-Z]）</td>
<td>[:upper:]</td>
<td>[:upper:]</td>
<td>[:upper:]</td>
<td>[:upper:]</td>
</tr>
<tr>
<td>[:space:]</td>
<td>任何一个空白字符： 支持制表符、空格，例如：’ [[:space:]] ’</td>
<td>[:space:]</td>
<td>[:space:]</td>
<td>[:space:]</td>
<td>[:space:]</td>
</tr>
<tr>
<td>[:blank:]</td>
<td>空格和制表符（横向和纵向），例如：’[[:blank:]]‘ó’[\s\t\v]’</td>
<td>[:blank:]</td>
<td>[:blank:]</td>
<td>[:blank:]</td>
<td>[:blank:]</td>
</tr>
<tr>
<td>[:graph:]</td>
<td>任何一个可以看得见的且可以打印的字符（注意：不包括空格和换行符等），例如：’[[:graph:]] ’</td>
<td>[:graph:]</td>
<td>[:graph:]</td>
<td>[:graph:]</td>
<td>[:graph:]</td>
</tr>
<tr>
<td>[:print:]</td>
<td>任何一个可以打印的字符（注意：不包括：[:cntrl:]、字符串结束符’\0’、EOF 文件结束符（-1）， 但包括空格符号），例如：’[[:print:]] ’</td>
<td>[:print:]</td>
<td>[:print:]</td>
<td>[:print:]</td>
<td>[:print:]</td>
</tr>
<tr>
<td>[:cntrl:]</td>
<td>任何一个控制字符（ASCII 字符集中的前 32 个字符，即：用十进制表示为从 0 到 31，例如：换行符、制表符等等），例如：’ [[:cntrl:]]’</td>
<td>[:cntrl:]</td>
<td>[:cntrl:]</td>
<td>[:cntrl:]</td>
<td>[:cntrl:]</td>
</tr>
<tr>
<td>[:punct:]</td>
<td>任何一个标点符号（不包括：[:alnum:]、[:cntrl:]、[:space:] 这些字符集）</td>
<td>[:punct:]</td>
<td>[:punct:]</td>
<td>[:punct:]</td>
<td>[:punct:]</td>
</tr>
<tr>
<td>[:xdigit:]</td>
<td>任何一个十六进制数（即：0-9，a-f，A-F）</td>
<td>[:xdigit:]</td>
<td>[:xdigit:]</td>
<td>[:xdigit:]</td>
<td>[:xdigit:]</td>
</tr>
</tbody>
</table>

        </div>

        <!-- .entry-content -->
        <div class="single-reward">
        </div>
        <div style="text-align:center; width: 100%" class="social-share share-mobile" data-disabled="diandian, tencent">
        </div>
        <!-- 评分 -->
        <div class="single-reward">
          
          <!-- 五星评分 -->
<div id="wpac-rating"></div>
<script type="text/javascript">
wpac_init = window.wpac_init || [];
wpac_init.push({widget: 'Rating', id: 23889});
(function() {
    if ('WIDGETPACK_LOADED' in window) return;
    WIDGETPACK_LOADED = true;
    var mc = document.createElement('script');
    mc.type = 'text/javascript';
    mc.async = true;
    mc.src = 'https://embed.widgetpack.com/widget.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
})();
</script>
<!-- <a target="_blank" rel="noopener" href="https://widgetpack.com" class="wpac-cr">Star Rating WIDGET PACK</a> -->
          
        </div>
        <!-- 自定义署名方式 -->
        <footer class="post-footer">
          <div class="post-lincenses" style="color: #ff9966;">
            欢迎转载，转载时请注明来源哦！
          
          <div class="post-tags" style="color: #a39391">
            <span><i class="fa fa-tags"></i>
              
            </span>
            <span>
              <i class="iconfont icon-file"></i>
              
            </span>
          </div>
          
          <div class="post-share" >
            <div class="social-share sharehidden share-component"></div>
            <i class="iconfont show-share icon-forward"></i>
          </div>
        </footer><!-- .entry-footer -->
        <!-- <div class="tag-cloud">
          <div class="tag-cloud-title">
          </div>
          <div class="tag-cloud-tags">
            
          </div>
        </div> -->
      </article>
      <!-- #post-## -->
      <div class="toc" style="background: none;"></div>
      <section class="post-squares nextprev">
        
        
          <div class="post-nepre full previous">
            
            <a href="/%5Bobject%20Object%5D/%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%93/" rel="prev">
              <div class="background">
                <img class="lazyload" src="https://jiujiu.tj.cn/jiujiu/1.webp" data-src="https://jiujiu.tj.cn/jiujiu/1.webp"
                  style="width: 100%; height: 135%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)"
                  src="">
              </div>
              <span class="label">Previous Post</span>
              <div class="info">
                <h3>基础总结</h3>
                <hr>
              </div>
            </a>
          </div>
          
          
      </section>
      <!-- 加密文章隐藏评论 -->
      <section class="comment" >
        <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<div id="gitalk-container" class="comment"></div> 
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script src="/js/md5.min.js"></script>
<script type="text/javascript">
	var gitalk = new Gitalk({
  	clientID: '',
  	clientSecret: '',
  	repo: '',
  	owner: '',
	admin: [''],
	distractionFreeMode: 'true',
    id: md5(location.pathname)
})
gitalk.render('gitalk-container') 
</script>

      </section>
      <!-- 加密文章隐藏作者信息 -->
      
    </main><!-- #main -->
  </div><!-- #primary -->
</div>


<!--评论配置-->



      <!-- body.end -->
    </div>
    <!-- search -->    
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            // PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
    <!-- footer-->    
    
    <footer id="colophon" class="site-footer" role="contentinfo">
    <div class="site-info">
        <div class="footertext">
          <div class="img-preload">
              <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/wordpress-rotating-ball-o.svg">
              <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/disqus-preloader.svg">
          </div>
        </div>
        <!-- 网站数据统计 -->
        <div class="footer-device">
          <p style="font-family: 'Ubuntu', sans-serif;">
            <span style="color: #ff9999;padding-left: 20px;">
                <!-- 网站运行时间统计 -->
                <i class="fa fa-clock-o" aria-hidden="true"></i>
                <span id="time" align="center">载入时间中...</span>
                <script>
                var now = new Date(); 
                function createtime() { 
                      var grt= new Date("Sun Mar 12 2023 01:20:00 GMT+0800 (GMT+08:00)");//在此处修改你的建站时间
                      now.setTime(now.getTime()+250); 
                      days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
                      hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
                      if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
                      mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
                      seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
                      snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
                      document.getElementById("time").innerHTML = "小破站在各种灾难中苟活了 "+ dnum +" 天 "+hnum + " 小时 " + mnum + " 分 " + snum + " 秒";      
                  } 
                  setInterval("createtime()",250);
                </script>
            </span> 
          </p>
        </div>
        <div class="footer-device">
          <p style="font-family: 'Ubuntu', sans-serif;">
            <span style="color: #b9b9b9;padding-left: 20px;">
              <!-- 全网站字数统计wordcount -->
              
              <!-- 不蒜子网页计数器 -->
              
              <span style="padding-left: 20px;"><i class="fa fa-fire" aria-hidden="true" style="color: #ff9999;display:inline-block"></i><span id="busuanzi_container_site_pv">总访问量： <span id="busuanzi_value_site_pv" style="color:#ff9999;"></span>次</span>
              </span>
              
              
              <span style="padding-left: 20px;"><i class="fa fa-user" aria-hidden="true" style="color: #ff9999;display:inline-block"></i><span id="busuanzi_container_site_uv">总访问人数： <span id="busuanzi_value_site_uv" style="color:#ff9999;"></span>人</span>
              </span>
              
            </span>
          </p>
        </div>
        <!-- 作者注明 -->
        <div class="footer-device">
          <p style="font-family: 'Ubuntu', sans-serif;">
              <span style="color: #b9b9b9;">
                Copyright &copy; 2023
                &nbsp;<a style="color: #ff9999;display:inline-block"> 酒酒 </a>
                &nbsp;<i class="iconfont icon-sakura rotating" style="color: #ffc0cb;display:inline-block"></i> 
                &nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank" style="color: #ff9999;display:inline-block">Hexo</a>
                |&nbsp;Theme&nbsp;<a href="https://gitee.com/cungudafa/hexo-theme-sakuraplus" target="_blank" style="color: #ff9999;display:inline-block">SakuraPlus</a>
              </span>
          </p>
        </div>
         <!-- 网站作者版权注明 -->
         
          <div id="footer-info" class="inner">
            <p style="font-family: 'Ubuntu', sans-serif;">
              <span style="color: #ff9999;">
                
              </span>
            </p>
          </div>
        
    </div><!-- .site-info -->
</footer>


<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/js/lib.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/js/InsightSearch.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/js/sakura-app.js"></script>


<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<!-- fancybox大图查看 需jq -->

  <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/js/jquery.fancybox.min.js"></script>
  <script>
    $('[data-fancybox="images"]').fancybox({
      thumbs : {
        autoStart : true //缩略图
      }
    });
    $('[data-fancybox]').fancybox({
      protect: true,//图片右键不能下载
      youtube : {
          controls : 0,
          showinfo : 0
      },
      vimeo : {
          color : 'f00'
      }
    });
  </script>


<!-- 自适应浏览器 -->
<script type="text/javascript">
  /* <![CDATA[ */
  if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
    var Poi = {"pjax":"0","movies":{"url": "https://jiujiu.tj.cn/jiujiu/","name":"by.mp4","live":"close"},"windowheight":"fixed","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
  } else {
    var Poi = {"pjax":"0","movies":{"url": "https://jiujiu.tj.cn/jiujiu/","name":"by.mp4","live":"open"},"windowheight":"auto","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
  }
  /* ]]> */
  
  </script>
  <script>
  $(document).ready(function() {
    if ($(".toc").length > 0 && document.body.clientWidth > 1200) {
      if ($(".pattern-center").length > 0) { //有图的情况
        tocbot.init({
            // Where to render the table of contents.
            tocSelector: '.toc', // 放置目录的容器
            // Where to grab the headings to build the table of contents.
            contentSelector: '.entry-content', // 正文内容所在
            // Which headings to grab inside of the contentSelector element.
            scrollSmooth: true,
            headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
            headingsOffset: -400,
            scrollSmoothOffset: -85
        });
      } else {
        tocbot.init({
            // Where to render the table of contents.
            tocSelector: '.toc', // 放置目录的容器
            // Where to grab the headings to build the table of contents.
            contentSelector: '.entry-content', // 正文内容所在
            // Which headings to grab inside of the contentSelector element.
            scrollSmooth: true,
            headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
            headingsOffset: -85,
            scrollSmoothOffset: -85
        });
      }
      var offsetTop = $('.toc').offset().top - 95;
      window.onscroll = function() {
        var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
        if (scrollTop >= offsetTop) {
          $('.toc').addClass('toc-fixed');
        } else {
          $('.toc').removeClass('toc-fixed');
        }
      }
    }
  });
  </script>
    <!-- Side menu -->
    <div class="openNav no-select" style="height: 50px;">
      <div class="iconflat no-select" style="width: 50px; height: 50px;">
        <div class="icon"></div>
      </div>
      <div class="site-branding search-form-submit">
        <i class="iconfont js-toggle-search iconsearch icon-search"></i>
      </div>
    </div>
  </section>
  <!-- Floating window -->
  <div id="mo-nav" class="">
  <div class="m-avatar">
    <img src="https://cdn.jsdelivr.net/gh/cungudafa/cdn/img/custom/cungudafa.jpg">
  </div>
  <p style="text-align: center; color: #333; font-weight: 900; font-family: 'Ubuntu', sans-serif; letter-spacing: 1.5px">酒酒</p>
  <p style="text-align: center; word-spacing: 20px;">
    
  </p>
  <ul id="menu-new-1" class="menu">
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
            首页
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/archives">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
            归档
          </span>
        </a>
        
          <ul class="sub-menu">
            
          </ul>
        
      </li>
    
  </ul>
  <p style="text-align: center; font-size: 13px; color: #b9b9b9;">&copy 2020 hexo-sakuraplus</p>
</div>
<button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display: none;"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
<!-- require MetingJS -->
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<meting-js

    enable="true"

    id="718291344"

    server="netease"

    type="playlist"

    fixed="true"

    autoplay="false"

    loop="all"

    order="random"

    preload="auto"

    volume="0.1"

    mutex="true"

>
</meting-js>
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script>

   <!-- pages壁纸切换 -->
 
    <div class="skin-menu no-select" id="mainskin"  style="position: fixed">
        <div class="theme-controls row-container">
            <ul class="menu-list">
                <li id="white-bg"> <i class="fa fa-television" aria-hidden="true"></i></li>
                <li id="sakura-bg"> <i class="iconfont icon-sakura"></i></li>
                <li id="gribs-bg"> <i class="fa fa-slack" aria-hidden="true"></i></li>
                <li id="KAdots-bg"> <i class="iconfont icon-dots"></i></li>
                <li id="totem-bg"> <i class="fa fa-optin-monster" aria-hidden="true"></i></li>
                <li id="pixiv-bg"> <i class="iconfont icon-pixiv"></i></li>
                <li id="bing-bg"> <i class="iconfont icon-bing"></i></li>
                <li id="dark-bg"> <i class="fa fa-moon-o" aria-hidden="true"></i></li>
            </ul>
        </div>
        <div class="font-family-controls row-container">
            <button type="button" class="control-btn-serif selected" data-mode="serif" onclick="mashiro_global.font_control.change_font()">Serif</button>
            <button type="button" class="control-btn-sans-serif" data-mode="sans-serif" onclick="mashiro_global.font_control.change_font()">Sans Serif</button>
        </div>
    </div>   
    <canvas id="night-mode-cover"></canvas> 
        <div class="changeSkin-gear no-select">
        <div class="keys" id="setbtn"> <span id="open-skinMenu"> 切换壁纸 | SCHEME TOOL 
            &nbsp;<i class="iconfont icon-gear inline-block rotating"></i> </span></div>
    </div><!-- skin.end -->

  <!-- left side bar -->

 <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":2,"vHeadPos":1,"jsonPath":"/live2dw/assets/histoire/histoire.model.json"},"display":{"superSample":2,"width":280,"height":480,"position":"left","hOffset":100,"vOffset":-100},"mobile":{"show":false,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false});</script></body>
</html>